#Annotations router kube
cert-manager.io/cluster-issuer  	: letsencrypt-prod
kubernetes.io/ingress.class		: nginx
kubernetes.io/ingress.provider 		: nginx

---
# docker build image 
#docker build -t image_name:tag .
#docker run image

#nguyensang/business-management-api

# run redis ubuntu
# sudo service redis-server start

# reset database redis
# redis-cli FLUSHDB

# https://maps.google.com/maps/place/?q=place_id:ChIJEc_ZpK0C24gRBO5c5hcEo1M

DELETE FROM business
WHERE id IN (
    SELECT id
    FROM (
        SELECT id, name, phone, address, ROW_NUMBER() OVER (PARTITION BY name, phone, address ORDER BY id) AS rnum
        FROM business
    ) AS t
    WHERE t.rnum > 1
);

SELECT phone, name, address, COUNT(*) AS duplicate_count
FROM business
GROUP BY phone, name, address
HAVING COUNT(*) > 1;


DELETE FROM business
WHERE "scratchLink" LIKE '%https://www.yellowpages.com%';

# 78613